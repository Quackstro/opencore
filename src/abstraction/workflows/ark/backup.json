{
  "id": "ark-backup",
  "plugin": "ark",
  "version": "1.0.0",
  "ttl": 600000,
  "entryPoint": "confirm-backup",
  "steps": {
    "confirm-backup": {
      "type": "confirm",
      "content": "üì¶ Create Backup\n\nThis will create an encrypted backup of your data. You'll need to provide a passphrase.\n\nProceed?",
      "confirmLabel": "Create Backup",
      "denyLabel": "Cancel",
      "transitions": {
        "yes": "enter-passphrase",
        "no": "cancelled"
      }
    },
    "enter-passphrase": {
      "type": "text-input",
      "content": "Enter a passphrase to encrypt the backup (min 8 characters):",
      "placeholder": "Encryption passphrase",
      "validation": {
        "minLength": 8,
        "maxLength": 128,
        "errorMessage": "Passphrase must be at least 8 characters."
      },
      "next": "execute-backup"
    },
    "execute-backup": {
      "type": "info",
      "content": "Creating encrypted backup...",
      "toolCall": {
        "name": "backup_create",
        "paramMap": {
          "passphrase": "$data.enter-passphrase.input"
        },
        "onError": "error"
      },
      "next": "done"
    },
    "done": {
      "type": "info",
      "content": "‚úÖ Backup created successfully. Keep your passphrase safe ‚Äî you'll need it to restore.",
      "terminal": true
    },
    "cancelled": {
      "type": "info",
      "content": "Backup cancelled.",
      "terminal": true
    },
    "error": {
      "type": "choice",
      "content": "‚ùå Backup creation failed.\n\n{{error}}\n\nWhat would you like to do?",
      "options": [
        {
          "id": "retry",
          "label": "üîÑ Retry",
          "style": "primary"
        },
        {
          "id": "cancel",
          "label": "‚ùå Cancel",
          "style": "danger"
        }
      ],
      "includeBack": false,
      "includeCancel": false,
      "transitions": {
        "retry": "execute-backup",
        "cancel": "error-cancelled"
      }
    },
    "error-cancelled": {
      "type": "info",
      "content": "Operation cancelled.",
      "terminal": true
    }
  }
}
